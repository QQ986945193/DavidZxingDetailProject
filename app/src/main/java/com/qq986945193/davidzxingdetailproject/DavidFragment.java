package com.qq986945193.davidzxingdetailproject;/* @Author ：程序员小冰 * @新浪微博 ：http://weibo.com/mcxiaobing * @GitHub: https://github.com/QQ986945193 * @CSDN博客: http://blog.csdn.net/qq_21376985 * @OsChina空间: https://my.oschina.net/mcxiaobing */import android.content.BroadcastReceiver;import android.content.Context;import android.content.Intent;import android.content.IntentFilter;import android.os.Bundle;import android.support.annotation.Nullable;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentTransaction;import android.view.LayoutInflater;import android.view.View;import android.view.View.OnClickListener;import android.view.ViewGroup;import android.widget.Button;import android.widget.Toast;import com.qq986945193.davidzxingdetailproject.zxing.fragment.CaptureFragment;/** * fragment中集成二维码的功能 */public class DavidFragment extends Fragment {    private Button btn_scan_barcode;    @Override    public View onCreateView(LayoutInflater inflater,                             @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {        // TODO Auto-generated method stub        View view = inflater.inflate(R.layout.fragment_david, container, false);        btn_scan_barcode = (Button) view.findViewById(R.id.btn_scan_barcode);        btn_scan_barcode.setOnClickListener(new OnClickListener() {            @Override            public void onClick(View v) {                // TODO Auto-generated method stub                CaptureFragment fragment = new CaptureFragment();                FragmentTransaction fragmentTransaction = getActivity()                        .getSupportFragmentManager().beginTransaction();                fragmentTransaction.replace(R.id.container, fragment, "");                fragmentTransaction.commit();                MyBrodcast brodcast = new MyBrodcast();                IntentFilter intentFilter = new IntentFilter(                        CaptureFragment.SCAN_RESULT_ACTION);                getActivity().registerReceiver(brodcast, intentFilter);            }        });        return view;    }    public class MyBrodcast extends BroadcastReceiver {        @Override        public void onReceive(Context context, Intent intent) {            if (intent.getAction().equals(CaptureFragment.SCAN_RESULT_ACTION)) {                Toast.makeText(context, intent.getExtras().getString("result"),                        Toast.LENGTH_SHORT).show();            }        }    }}